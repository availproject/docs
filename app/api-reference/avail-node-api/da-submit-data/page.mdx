import { Callout, Steps, Tabs } from 'nextra/components'

# Submit new data to Avail DA

On-chain name of extrinsic: `dataAvailability_submitData`


## Parameters

<Tabs items={['avail-js', 'avail-rust', 'avail-go']}>

<Tabs.Tab>
| parameter | type          | optional | description                                     |
| --------- | ------------- | -------- | ----------------------------------------------- |
| data      | string        | false    | data to be submitted                            |
| waitFor   | WaitFor       | false    | wait for block inclusion or finalization        |
| account   | KeyringPair   | false    | account that will send and sign the transaction |
| options   | SignerOptions | true     | used to overwrite existing signer options       |
</Tabs.Tab>

<Tabs.Tab>
| parameter | type        | optional | description                                     |
| --------- | ----------- | -------- | ----------------------------------------------- |
| key       | Key         | false    | name of the application key                     |
| waitFor   | WaitFor     | false    | wait for block inclusion or finalization        |
| account   | KeyringPair | false    | account that will send and sign the transaction |
</Tabs.Tab>

<Tabs.Tab>
| parameter        | type          | optional | description                                            |
| ---------------- | ------------- | -------- | ------------------------------------------------------ |
| api              | API           | false    | api for avail chain                                    |
| WaitForInclusion | WaitFor       | false    | wait for block inclusion or finalization               |
| Seed             | Mnemonic      | false    | seed of the account that needs to sign the transaction |
| data             | SignerOptions | true     | data to be submitted                                   |
| AppID            | SignerOptions | true     | AppID in which the transaction needs to be signed      |
</Tabs.Tab>

</Tabs>

## Returns

On failure, a reason of failure is returned. On Success, DataSubmitted event, transaction data, transaction hash and block hash is returned.


## Minimal example

<Callout type="info">
1. You will need to set up the dev environment required to run this example. 
For instructions, [check out our docs here](/api-reference/avail-node-api#setting-up-the-dev-environment).

2. If you're sending an extrinsic (i.e conducting a transaction) you will need to replace the demo seed phrase with your own seed phrase.
The rest of the code should work as is.
</Callout>

<Tabs items={['avail-js', 'avail-rust', 'avail-go']}>

<Tabs.Tab>

1. Inside `your-file-name.ts`, add the following code:

```typescript filename="avail-js"
import { SDK, WaitFor, Keyring } from "avail-js-sdk"

const main = async () => {
  const providerEndpoint = "wss://turing-rpc.avail.so/ws";
  const sdk = await SDK.New(providerEndpoint)

  const Alice = "This is a random seed phrase please replace with your own";
  const account = new Keyring({ type: "sr25519" }).addFromUri(Alice)
  const data = "My Awesome Data"

  const result = await sdk.tx.dataAvailability.submitData(data, WaitFor.BlockInclusion, account)
  if (result.isErr) {
    console.log(result.reason)
    process.exit(1)
  }

  console.log("Data=" + result.txData.data)
  console.log("Who=" + result.event.who + ", DataHash=" + result.event.dataHash)
  console.log("TxHash=" + result.txHash + ", BlockHash=" + result.blockHash)

  process.exit()
}
main()
```

2. Run the code using:

```bash
ts-node your-file-name.ts
```
</Tabs.Tab>

<Tabs.Tab>

1. Inside `src/main.rs`, paste the following code:

```rust filename="avail-rust"
use avail_rust::{Data, Keypair, Nonce, Options, SecretUri, WaitFor, SDK};
use core::str::FromStr;
 
#[tokio::main]
async fn main() -> Result<(), String> {
	let sdk = SDK::new("wss://turing-rpc.avail.so/ws").await.unwrap();
 
    let alice = "This is a random seed phrase please replace with your own";
    let secret_uri = SecretUri::from_str(alice).unwrap();
	let account = Keypair::from_uri(&secret_uri).unwrap();
	let data = String::from("Sample data being submitted......").as_bytes().to_vec();
	let data = Data { 0: data };
 
	let wait_for = WaitFor::BlockInclusion;
	let options = Options::new().nonce(Nonce::BestBlockAndTxPool);
 
	let result = sdk
		.tx
		.data_availability
		.submit_data(data, wait_for, &account, Some(options))
		.await?;
 
	println!(
		"Who={}, DataHash={:?}",
		result.event.who, result.event.data_hash
	);
	println!("TxData={:?}", result.tx_data.data);
	println!(
		"TxHash={:?}, BlockHash={:?}",
		result.tx_hash, result.block_hash
	);
 
	Ok(())
}
```

2. Run the code using:

```bash
cargo run
```
<br/>

<details className="border p-3 rounded-md bg-[#EFF6FF] border-[#] hover:!bg-[#EFF6FF]">
<summary>Sample Response:</summary>
```bash
    Finished dev [unoptimized + debuginfo] target(s) in 13.93s
     Running `target/debug/da-submit-data`
Who=5CqgQkrDcdg5QrtuxT3H7WszrqgrBMhdwRbmMVXQzc4VSiEg, DataHash=0xdb10b83f02707eff828e95e4cb534871d6e1ca9fb10eb9ccc12795e9abf6f931
TxData=BoundedVec([83, 97, 109, 112, 108, 101, 32, 100, 97, 116, 97, 32, 98, 101, 105, 110, 103, 32, 115, 117, 98, 109, 105, 116, 116, 101, 100, 46, 46, 46, 46, 46, 46])
TxHash=0xbfdf581618f28ef707147ea47a56483c6214dbaa83c53a6cc307073e3b8b578b, BlockHash=0xbee81b96a4e86dbc1a668da466416f6648c0025a7fc0d428ecae71d504290c62
```
</details>


</Tabs.Tab>

<Tabs.Tab>

1. Inside `main.go`, paste the following code:

```go filename="avail-go"
package main

import (
	"github.com/availproject/avail-go-sdk/src/config"
	"github.com/availproject/avail-go-sdk/src/sdk"
	"github.com/availproject/avail-go-sdk/src/sdk/tx"

	"fmt"
)

func main() {
	config, err := config.LoadConfig()
	if err != nil {
		fmt.Printf("cannot load config:%v", err)
	}
	api, err := sdk.NewSDK(config.ApiURL)
	if err != nil {
		fmt.Printf("cannot create api:%v", err)
	}

	appID := 0

	// if app id is greater than 0 then it must be created before submitting data
	if config.AppID != 0 {
		appID = config.AppID
	}
	fmt.Println("Submitting data ...")
	WaitFor := sdk.BlockInclusion

	BlockHash, txHash, err := tx.SubmitData(api, config.Seed, appID, "my happy data", WaitFor)
	if err != nil {
		fmt.Printf("cannot submit data:%v", err)
	}
	fmt.Printf("Data submitted successfully with block hash: %v\n and ext hash:%v", BlockHash.Hex(), txHash.Hex())
}
```

2. Run the code using:

```bash
go run main.go
```

<Callout type="info">
If you receive errors related to missing dependencies while trying to execute your code, run:
```bash
go mod tidy
```
and try again.
</Callout>
</Tabs.Tab>

</Tabs>

## Submit data using a specific `app_id`

<Callout type="info">
**PLEASE NOTE**<br/>
1. You can submit data to Avail DA using a specific `app_id` that you created. If you don't know how,
read more [in our docs here](/api-reference/avail-node-api/da-create-application-key).<br/>

2. You can submit data to **ANY** `app_id`, even if you didn't create it. This however does not contitute an
attack vector since the rollups building on top of Avail DA can always filter out DA submissions.

3. If a specific `app_id` is not configured, the default is set to `0`.
</Callout>

<Tabs items={['avail-js', 'avail-rust', 'avail-go']}>

<Tabs.Tab>
1. Inside `your-file-name.ts`, paste the following code:

```typescript filename="avail-js"
import { SDK, WaitFor, Keyring, TransactionOptions } from "avail-js-sdk"
 
const main = async () => {
  const providerEndpoint = "wss://turing-rpc.avail.so/ws";
  const sdk = await SDK.New(providerEndpoint)
 
  const Alice = 'This is a random seed phrase please replace with your own';
  const account = new Keyring({ type: "sr25519" }).addFromUri(Alice)
  const data = "My Awesome Data"
  const appId = 89
  const options = { app_id: appId }
 
  const result = await sdk.tx.dataAvailability.submitData(data, WaitFor.BlockInclusion, account, options)
	if (result.isErr) {
      console.log(result.reason)
      process.exit(1)
    }
 
  console.log("Data=" + result.txData.data)
  console.log("Who=" + result.event.who + ", DataHash=" + result.event.dataHash)
  console.log("TxHash=" + result.txHash + ", BlockHash=" + result.blockHash)
 
  process.exit()
}
main()
```

2. Run the code using:

```bash
ts-node your-file-name.ts
```
</Tabs.Tab>

<Tabs.Tab>
1. Inside `src/main.rs`, paste the following code:

```rust filename="avail-rust"
use avail_rust::{Data, Keypair, Nonce, Options, SecretUri, WaitFor, SDK};
use core::str::FromStr;
 
#[tokio::main]
async fn main() -> Result<(), String> {
	let sdk = SDK::new("wss://turing-rpc.avail.so/ws").await.unwrap();
 
    let alice = "This is a random seed phrase please replace with your own";
	let secret_uri = SecretUri::from_str(alice).unwrap();
	let account = Keypair::from_uri(&secret_uri).unwrap();
	let data = String::from("Sample data being submitted......").as_bytes().to_vec();
	let data = Data { 0: data };
 
	let wait_for = WaitFor::BlockInclusion;
	let options = Options::new().nonce(Nonce::BestBlockAndTxPool);
 
	let app_id = 89; // You can change this value to your desired app_id
 
    // Create the options with the app_id included
    let options = Options {
        app_id: Some(app_id),
        mortality: None,
        nonce: Some(Nonce::BestBlockAndTxPool),
        tip: None,       
    };
 
	let result = sdk
		.tx
		.data_availability
		.submit_data(data, wait_for, &account, Some(options))
		.await?;
 
	println!(
		"Who={}, DataHash={:?}",
		result.event.who, result.event.data_hash
	);
	println!("TxData={:?}", result.tx_data.data);
	println!(
		"TxHash={:?}, BlockHash={:?}",
		result.tx_hash, result.block_hash
	);
 
	Ok(())
}
```
2. Run the code using:

```bash
cargo run
```
</Tabs.Tab>

<Tabs.Tab>

1. Inside `main.go`, paste the following code:

```go filename="avail-go"
package main

import (
	"github.com/availproject/avail-go-sdk/src/config"
	"github.com/availproject/avail-go-sdk/src/sdk"
	"github.com/availproject/avail-go-sdk/src/sdk/tx"

	"fmt"
)

func main() {
	config, err := config.LoadConfig()
	if err != nil {
		fmt.Printf("cannot load config:%v", err)
	}
	api, err := sdk.NewSDK(config.ApiURL)
	if err != nil {
		fmt.Printf("cannot create api:%v", err)
	}

	// You can your own app id here
	appID := 0

	fmt.Println("Submitting data ...")
	WaitFor := sdk.BlockInclusion

	// submit data
	BlockHash, txHash, err := tx.SubmitData(api, config.Seed, appID, "my happy data", WaitFor)
	if err != nil {
		fmt.Printf("cannot submit data:%v", err)
	}
	fmt.Printf("Data submitted successfully with block hash: %v\n and ext hash:%v", BlockHash.Hex(), txHash.Hex())
}
```

2. Run the code using:

```bash
go run main.go
```

<Callout type="info">
If you receive errors related to missing dependencies while trying to execute your code, run:
```bash
go mod tidy
```
and try again.
</Callout>
</Tabs.Tab>

</Tabs>

> This will lead to your data being submitted through a specific `app_id`, which you can verify by looking
> up your transaction on the [Avail explorer](https://explorer.availproject.org/#/explorer).

