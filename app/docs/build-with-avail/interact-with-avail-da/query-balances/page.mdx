import { Callout, Steps, Tabs } from 'nextra/components'

# Query balances on Avail DA

## Setting up the dev environment

In this guide we will use Avail's dedicated SDKs to interact with the [Turing testnet](/docs/networks).
To set up a dev environment for the SDK of your choice, please follow the steps [outlined here](/api-reference/avail-node-api#setting-up-the-dev-environment).

## Querying the balance of an account

To query basic information about an account, including it's balance, you need to call the `system_account` extrinsic from the `system` pallet on an Avail node.

<Tabs items={['avail-js', 'avail-rust', 'avail-go', 'AvailApps explorer']}>

<Tabs.Tab>
1. Inside `your-file-name.ts`, add the following code:

```typescript filename="avail-js"
import { SDK } from "avail-js-sdk"

const main = async () => {
  const providerEndpoint = "wss://turing-rpc.avail.so/ws"
  const sdk = await SDK.New(providerEndpoint)

  const key = "5DDY2yzh8uCysYFAiRSTeQVwtZSKNF49CkQkyPH852xvrYKk"
  const value: any = await sdk.api.query.system.account(key)

  console.log(value.toHuman())
  const freeBalanceInAvail = Number(value.data.free.toString()) / Math.pow(10, 18)
  console.log(`Free balance: ${freeBalanceInAvail} AVAIL`)

  process.exit()
}

main()
```

2. Run the code using:

```bash
ts-node your-file-name.ts
```
</Tabs.Tab>

<Tabs.Tab>
1. Inside `main.rs`, add the following code:

```rust filename="avail-rust" filename="avail-rust"
use avail_rust::{avail, AccountId, SDK};
use core::str::FromStr;
 
#[tokio::main]
async fn main() -> Result<(), String> {
	let sdk = SDK::new("wss://turing-rpc.avail.so/ws").await.unwrap();
 
	let account_id =
		AccountId::from_str("5DDY2yzh8uCysYFAiRSTeQVwtZSKNF49CkQkyPH852xvrYKk").unwrap(); // Alice_Stash
 
	let storage_query = avail::storage().system().account(account_id);
	let best_block_hash = sdk
		.rpc
		.chain
		.get_block_hash(None)
		.await
		.map_err(|e| e.to_string())?;
	let result = sdk
		.api
		.storage()
		.at(best_block_hash)
		.fetch(&storage_query)
		.await
		.map_err(|e| e.to_string())?;
 
	dbg!(result);
 
	Ok(())
}
```

2. Run the code using:

```bash
cargo run
```

</Tabs.Tab>

<Tabs.Tab>
1. Inside `main.go`, add the following code:

```go filename="avail-go"
package main

import (
	"fmt"

	"github.com/availproject/avail-go-sdk/src/sdk"
	"github.com/centrifuge/go-substrate-rpc-client/v4/types"
	"github.com/vedhavyas/go-subkey/v2"
)

// The following example shows how to connect to a node and display some basic information.
func main() {
	api, err := sdk.NewSDK("wss://turing-rpc.avail.so/ws")

	if err != nil {
		fmt.Printf("cannot create api:%v", err)
	}

	meta, err := api.RPC.State.GetMetadataLatest()
	if err != nil {
		panic(fmt.Sprintf("cannot get metadata:%v", err))
	}

	address := "5DDY2yzh8uCysYFAiRSTeQVwtZSKNF49CkQkyPH852xvrYKk"
	_, pubKey, err := subkey.SS58Decode(address)

	if err != nil {
		panic(fmt.Sprintf("Failed to decode SS58 address: %v", err))
	}

	key, err := types.CreateStorageKey(meta, "System", "Account", pubKey, nil)
	if err != nil {
		panic(fmt.Sprintf("cannot create storage key:%v", err))
	}

	var accountInfo types.AccountInfo
	ok, err := api.RPC.State.GetStorageLatest(key, &accountInfo)
	if err != nil || !ok {
		panic(fmt.Sprintf("cannot get latest storage:%v", err))
	}

	fmt.Printf("Account info: %v\n", accountInfo)
	
	freeBalance := new(big.Float).SetInt(accountInfo.Data.Free.Int)
	freeBalance.Quo(freeBalance, big.NewFloat(1e18))
	fmt.Printf("Free balance: %v AVAIL\n", freeBalance)
}
```

2. Run the code using:

```bash
go run main.go
```

<Callout type="info">
If you receive errors related to missing dependencies while trying to execute your code, run:
```bash
go mod tidy
```
and try again.
</Callout>
</Tabs.Tab>

<Tabs.Tab>
The following instructions will guide you on how to query the balance of an account using the AvailApps explorer:

1. Go to the [`chains state` page](https://explorer.avail.so/#/chainstate) on the AvailApps explorer.

2. The balance of an account can be queried by calling the `account(AccountId32)` method from within the `system` pallet. Select the `system`
pallet from the dropdown on the left, and the `account(AccountId32)` method from the dropdown on the right.

<br/>
<div align="center">
<img src="/img/new-explorer/new-explorer-7.png" align="center" />
</div>

3. Either paste the address of an account in the `AccountId32` field or select an explorer-connected account from the dropdown.

4. Leave the `blockhash` field empty (This will query the latest balance of the account), and click on the `+` button near the top-right.

<br/>
<div align="center">
<img src="/img/new-explorer/new-explorer-8.png" align="center" />
</div>

5. And that's it. You just used the `AvailApps` explorer to query the balance of an account on the Avail network. You can query other methods in a similar way.

</Tabs.Tab>

</Tabs>

Your response should look something like this:

<br/>
<details className="border p-3 rounded-md bg-[#EFF6FF] border-[#] hover:!bg-[#EFF6FF]">
<summary>Sample Response:</summary>
```
{
  nonce: '109',
  consumers: '2',
  providers: '1',
  sufficients: '0',
  data: {
    free: '1,000,000,000,000',
    reserved: '100,000,300,000,000,000,000',
    frozen: '100,000,000,000,000,000,000',
    flags: '170,141,183,460,469,231,731,687,303,715,884,105,728'
  }
}
Free balance: 28.3046577073 AVAIL
```
</details>