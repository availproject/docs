import { Callout, Steps, Tabs } from 'nextra/components'

# Submit new data to Avail DA

Name of node-level extrinsic being called: `dataAvailability_submitData`

<Tabs items={['avail-js', 'avail-deno', 'avail-rust']}>

<Tabs.Tab>

### Parameters

| parameter | type          | optional | description                                     |
| --------- | ------------- | -------- | ----------------------------------------------- |
| data      | string        | false    | data to be submitted                            |
| waitFor   | WaitFor       | false    | wait for block inclusion or finalization        |
| account   | KeyringPair   | false    | account that will send and sign the transaction |
| options   | SignerOptions | true     | used to overwrite existing signer options       |

### Return value

On failure, a reason of failure is returned. On Success, DataSubmitted event, transaction data, transaction hash and block hash is returned.

### Minimal example

<Callout type="info">
You will need to set up the dev enviornment required to run this example. 
For instructions, [check out our docs here](/api-reference/avail-node-api#setting-up-the-dev-environment).
</Callout>

1. Inside `da_submitData.ts`, paste the following code:

```typescript
import { SDK } from "../../src/sdk"
import { Keyring } from "@polkadot/api"
import { WaitFor } from "../../src/sdk/transactions"

const main = async () => {
const providerEndpoint = "wss://turing-rpc.avail.so/ws";
const sdk = await SDK.New(providerEndpoint);

const Alice = "This is a random seed phrase please do not use it";
  const data = "My Awesome Data"

  const result = await sdk.tx.dataAvailability.submitData(data, WaitFor.BlockInclusion, account)
  if (result.isErr) {
    console.log(result.reason)
    process.exit(1)
  }

  console.log("Data=" + result.txData.data)
  console.log("Who=" + result.event.who + ", DataHash=" + result.event.dataHash)
  console.log("TxHash=" + result.txHash + ", BlockHash=" + result.blockHash)

  process.exit()
}
main()
```

2. Run the code using:

```bash
node da_submitData.ts
```

</Tabs.Tab>

<Tabs.Tab>

### Parameters

| parameter | type          | optional | description                                     |
| --------- | ------------- | -------- | ----------------------------------------------- |
| data      | string        | false    | data to be submitted                            |
| waitFor   | WaitFor       | false    | wait for block inclusion or finalization        |
| account   | KeyringPair   | false    | account that will send and sign the transaction |
| options   | SignerOptions | true     | used to overwrite existing signer options       |

### Return value

On failure, a reason of failure is returned. On Success, DataSubmitted event, transaction data, transaction hash and block hash is returned.

### Minimal example

<Callout type="info">
You will need to set up the dev enviornment required to run this example. 
For instructions, [check out our docs here](/api-reference/avail-node-api#setting-up-the-dev-environment).
</Callout>

1. Inside `da_submitData.ts`, paste the following code:

```typescript
import { Keyring, SDK, WaitFor } from "https://raw.githubusercontent.com/availproject/avail/main/avail-deno/src/sdk.ts";

const providerEndpoint = "wss://turing-rpc.avail.so/ws";
const sdk = await SDK.New(providerEndpoint);

const Alice = "This is a random seed phrase please do not use it";

const account = new Keyring({ type: "sr25519" }).addFromUri(Alice);
const data = "Sample data being submitted......";

const result = await sdk.tx.dataAvailability.submitData(data, WaitFor.BlockInclusion, account);
if (result.isErr) {
	console.log(result.reason);
	Deno.exit(1);
}

console.log("Data=" + result.txData.data);
console.log("Who=" + result.event.who + ", DataHash=" + result.event.dataHash);
console.log("TxHash=" + result.txHash + ", BlockHash=" + result.blockHash);

Deno.exit();
```

2. Run the code using:

```bash
deno run --allow-net da_submitData.ts
```
<br/>

<details className="border p-3 rounded-md bg-[#EFF6FF] border-[#] hover:!bg-[#EFF6FF]">
<summary>Sample Response:</summary>

```bash
2024-08-20 23:11:26 PORTABLEREGISTRY: Unable to determine runtime Call type, cannot inspect sp_runtime::generic::unchecked_extrinsic::UncheckedExtrinsic
2024-08-20 23:11:26        API/INIT: RPC methods not decorated: chainSpec_v1_chainName, chainSpec_v1_genesisHash, chainSpec_v1_properties
2024-08-20 23:11:26        API/INIT: avail/37: Not decorating unknown runtime apis: 0x7915d720c2769ac8/2, 0x537dc9ebb965e7c0/4, 0x7f4c771cd72fb1da/1, KateApi/1, 0x28ac62e78c1baeac/1, 0xfbc577b9d747efd6/1
Data=53616d706c652064617461206265696e67207375626d69747465642e2e2e2e2e2e
Who=5CqgQkrDcdg5QrtuxT3H7WszrqgrBMhdwRbmMVXQzc4VSiEg, DataHash=0xdb10b83f02707eff828e95e4cb534871d6e1ca9fb10eb9ccc12795e9abf6f931
TxHash=0x5ce5b90b30b640cc34a2301da591c4f1526726e5c732f5615166d24fd60313cc, BlockHash=0x86544212bfdf7578881acfafb148f2b6a154098568644c66a7a14ed3099bb342
```
</details>


</Tabs.Tab>

<Tabs.Tab>

### Parameters

| parameter | type        | optional | description                                     |
| --------- | ----------- | -------- | ----------------------------------------------- |
| key       | Key         | false    | name of the application key                     |
| waitFor   | WaitFor     | false    | wait for block inclusion or finalization        |
| account   | KeyringPair | false    | account that will send and sign the transaction |

### Return value

On failure, a reason of failure is returned. On Success, DataSubmitted event, transaction data, transaction hash and block hash is returned.

### Minimal Example

<Callout type="info">
You will need to set up the dev enviornment required to run this example. 
For instructions, [check out our docs here](/api-reference/avail-node-api#setting-up-the-dev-environment).
</Callout>

1. Inside `src/main.rs`, paste the following code:

```rust
use avail_rust::{Data, Keypair, SecretUri, WaitFor, SDK};
use core::str::FromStr;

#[tokio::main]
async fn main() -> Result<(), String> {
	let sdk = SDK::new("wss://turing-rpc.avail.so/ws").await.unwrap();

	let Alice = "This is a random seed phrase please do not use it";
	let secret_uri = SecretUri::from_str(Alice).unwrap();
	let account = Keypair::from_uri(&secret_uri).unwrap();
	let data = String::from("Sample data being submitted......").as_bytes().to_vec();
	let data = Data { 0: data };

	let result = sdk
		.tx
		.data_availability
		.submit_data(data, WaitFor::BlockInclusion, &account)
		.await?;

	println!(
		"Who={}, DataHash={:?}",
		result.event.who, result.event.data_hash
	);
	println!("TxData={:?}", result.tx_data.data);
	println!(
		"TxHash={:?}, BlockHash={:?}",
		result.tx_hash, result.block_hash
	);

	Ok(())
}
```

2. Run the code using:

```bash
cargo run
```
<br/>

<details className="border p-3 rounded-md bg-[#EFF6FF] border-[#] hover:!bg-[#EFF6FF]">
<summary>Sample Response:</summary>
```bash
    Finished dev [unoptimized + debuginfo] target(s) in 13.93s
     Running `target/debug/da-submit-data`
Who=5CqgQkrDcdg5QrtuxT3H7WszrqgrBMhdwRbmMVXQzc4VSiEg, DataHash=0xdb10b83f02707eff828e95e4cb534871d6e1ca9fb10eb9ccc12795e9abf6f931
TxData=BoundedVec([83, 97, 109, 112, 108, 101, 32, 100, 97, 116, 97, 32, 98, 101, 105, 110, 103, 32, 115, 117, 98, 109, 105, 116, 116, 101, 100, 46, 46, 46, 46, 46, 46])
TxHash=0xbfdf581618f28ef707147ea47a56483c6214dbaa83c53a6cc307073e3b8b578b, BlockHash=0xbee81b96a4e86dbc1a668da466416f6648c0025a7fc0d428ecae71d504290c62
```
</details>

</Tabs.Tab>
</Tabs>
