# Deploy Arbitrum Orbit with Avail DA

Prerequisite :- Docker, Avail Account, Network :- arbSepolia, Hex

### Step-1 :- Download avail nitro node docker image

1. Download the avail-nitro-node image from docker hub:- [avail-nitro-node](https://hub.docker.com/layers/availrishabh/avail-nitro-node/latest/images/sha256-70564d74bb771549ab4869b23eaf9913663710340837b1f4fbc896f30ec87b3d?context=repo).
    
    ```powershell
    docker pull availrishabh/avail-nitro-node-dev:v1
    ```
    

### Step-2 :- Deploy Rollup Contracts

1. Download the nitro-contract with Avail DA :- Clone the [nitro-contracts](https://github.com/availproject/nitro-contracts.git)
    
    ```bash
    git clone https://github.com/availproject/nitro-contracts.git
    cd nitro-contracts
    git checkout data-availability-verifiaction-v2.3.1
    yarn install
    yarn build
    ```
    
2. Create `.env` file as per `.env.sample` and Set Rollup Creator Address and Devnet Private key
    
    ```bash
    ROLLUP_CREATOR_ADDRESS="0x073Dde9B420099E187CA51d94067dDC21840CD8E"
    ```
    
3. Set the config file `scripts/config.ts` with required configurations where `wasmModuleRoot` must be this based on your cpu arch.
    
    ```jsx
    // for amd64
    wasmModuleRoot:'0x6e61421c8274c15c8ff7af458405a6d1868341ddde7a6096bac5c7fed01735a4'
    // for arm64
    wasmModuleRoot:'0x520bcf26c0ee958bccdd6c27513ae8e8e083531e7ad22d7419d02b4c25e354f2'
    ```
    
4. Now deploy rollup contract using
    
    ```bash
    yarn run deploy-eth-rollup â€”-network arbSepolia
    ```
    
5. You will get to see this way of addresses:
<br/>
<img src="/img/nitro-stack.png" alt="nitro-stack" width="100%"/>
    

### Step-3 :- Spin up the chain using orbit-setup-script

1. Download orbit-setup-script:- Clone [orbit-setup-script](https://github.com/OffchainLabs/orbit-setup-script.git)
    
    ```bash
    git clone https://github.com/OffchainLabs/orbit-setup-script.git
    cd orbit-setup-script
    ```
    
2. Add the `nodeConfig.json` in `./config`
    
    ```json
    {
      "chain": {
        "info-json": "[{\"chain-id\":555371422,\"parent-chain-id\":421614,\"parent-chain-is-arbitrum\":true,\"chain-name\":\"My Arbitrum L3 Chain\",\"chain-config\":{\"homesteadBlock\":0,\"daoForkBlock\":null,\"daoForkSupport\":true,\"eip150Block\":0,\"eip150Hash\":\"0x0000000000000000000000000000000000000000000000000000000000000000\",\"eip155Block\":0,\"eip158Block\":0,\"byzantiumBlock\":0,\"constantinopleBlock\":0,\"petersburgBlock\":0,\"istanbulBlock\":0,\"muirGlacierBlock\":0,\"berlinBlock\":0,\"londonBlock\":0,\"clique\":{\"period\":0,\"epoch\":0},\"arbitrum\":{\"EnableArbOS\":true,\"AllowDebugPrecompiles\":false,\"DataAvailabilityCommittee\":false,\"InitialArbOSVersion\":11,\"GenesisBlockNum\":0,\"MaxCodeSize\":24576,\"MaxInitCodeSize\":49152,\"InitialChainOwner\":\"0xd41996ED89bb5BF7dBfB181D8D93E8067446200B\"},\"chainId\":555371422},\"rollup\":{\"bridge\":\"0x1F4f5F72376a163B2e39db27d73CA029145d16f1\",\"inbox\":\"0x909f9B9aE47e28E4e37C06E47d848a6f49C3ed63\",\"sequencer-inbox\":\"0x4a063a85c0198887e6bA499a50e2226f8AE9F43b\",\"rollup\":\"0xC067884D8ED8EC03cB913e901A05C60532f63C02\",\"validator-utils\":\"0xB11EB62DD2B352886A4530A9106fE427844D515f\",\"validator-wallet-creator\":\"0xEb9885B6c0e117D339F47585cC06a2765AaE2E0b\",\"deployed-at\":27754620}}]",
        "name": "My Arbitrum L3 Chain"
      },
      "parent-chain": {
        "connection": {
          "url": "https://sepolia-rollup.arbitrum.io/rpc"
        }
      },
      "http": {
        "addr": "0.0.0.0",
        "port": 8449,
        "vhosts": [
          "*"
        ],
        "corsdomain": [
          "*"
        ],
        "api": [
          "eth",
          "net",
          "web3",
          "arb",
          "debug"
        ]
      },
      "node": {
        "sequencer": true,
        "delayed-sequencer": {
          "enable": true,
          "use-merge-finality": false,
          "finalize-distance": 1
        },
        "batch-poster": {
          "max-size": 90000,
          "enable": true,
          "parent-chain-wallet": {
            "private-key": "**pkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpk**"
          }
        },
        "staker": {
          "enable": true,
          "strategy": "MakeNodes",
          "parent-chain-wallet": {
            "private-key": "pkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpkpk"
          }
        },
        "dangerous": {
          "no-sequencer-coordinator": true
        },
        "avail": {
          "enable": true,
          "seed": "test test test test test test test test test test test avail",
          "api-url": "wss://rpc-hex-devnet.avail.tools/ws",
          "app-id": 1,
    			"timeout":'100s',
    			"vectorx": "0xbc281367e1F2dB1c3e92255AA2F040B1c642ec75",
          "arbSepolia-rpc": "wss://arb-sepolia.g.alchemy.com/v2/xxxxxxxxxx"
    		}
      },
      "execution": {
        "forwarding-target": "",
        "sequencer": {
          "enable": true,
          "max-tx-data-size": 85000,
          "max-block-speed": "250ms"
        },
        "caching": {
          "archive": true
        }
      }
    }
    
    ```
    
3. Update `docker-compose` file of `orbit-setup-script`
    
    ```json
    ...
    nitro:
      image: avail-nitro-node-dev
      ports:
    ...
    ```
    
4. Run your chain
    
    ```bash
    cd orbit-setup-script
    docker-compose up -d
    ```
    
    A Nitro node and BlockScout explorer instance will be started. Visit **[http://localhost:4000/](http://localhost:4000/)** to access your BlockScout explorer instance - this will allow you to view your chain's transactions and blocks, which can be useful for debugging.
    

# Hurray!

**Congratulations,** Your local Orbit chain with Avail DA is now running.